<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Map dimensions
        const mapWidth = 256 * 4; // Adjust this based on your map size
        const mapHeight = 256 * 4;

        // Define bounds with a slight padding
        const padding = 32; // Adjust padding to allow near-edge panning
        const elasticBounds = [[-padding, -padding], [mapHeight + padding, mapWidth + padding]];
        const hardBounds = [[0, 0], [mapHeight, mapWidth]]; // Hard bounds

        // Initialize the map
        const map = L.map('map', {
            crs: L.CRS.Simple, // Use Simple CRS for pixel-based maps
            minZoom: 0,
            maxZoom: 4, // Adjust this to your max zoom level
            zoom: 0, // Start zoom level
            center: [mapHeight / 2, mapWidth / 2], // Center map
            maxBoundsViscosity: 1.0 // Static bounds
        }).fitBounds(hardBounds);

        // Set elastic bounds to restrict panning
        map.setMaxBounds(elasticBounds);

        // Add tile layer with correct path
        L.tileLayer('./tiles/{z}/{x}/{y}.png', {
            tileSize: 256, // Tile size in pixels
            noWrap: true, // Prevent wrapping
            continuousWorld: false, // No horizontal wrapping
            errorTileUrl: 'error.png', // Error image for missing tiles
            bounds: hardBounds // Define bounds to restrict tile loading
        }).addTo(map);

        // Log tile errors for debugging
        map.on('tileerror', function (error) {
            console.error('Tile not found:', error.tile.src);
        });
    </script>
</body>
</html>
